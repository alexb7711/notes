<!DOCTYPE html>
<!-- MARKER -->
<html>
<head>
    <title>nextcloud-update</title>
    <link href="style.css" rel="stylesheet">

    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
            config: ["MMLorHTML.js"],
            jax: ["input/TeX", "output/HTML-CSS", "output/NativeMML"],
            extensions: ["MathMenu.js", "MathZoom.js"]
    });
    </script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
</head>
<body>
<div id="navigation">
<ul>
<li><a class="%blog.html%" href="blog.html">blog</a></li>
<li><a class="%notes.html%" href="notes.html">notes</a></li>
<li><a class="%projects.html%" href="projects.html">projects</a></li>
<li><a class="%index.md%" href="index.html">index</a></li>
</ul>
</div>

<div class="content">
<ul>
<li>=ssh alex@192.168.86.43=</li>
<li>=docker exec -it mariadb bash=</li>
<li>=mariadb -p nextcloud= (=ab1qazxsw2!QAZXSW@=)</li>
</ul>
<h1 id="begin_src-php">+begin_src php</h1>
<p>'dbname' =&gt; 'nextcloud',
  'dbhost' =&gt; 'mariadb:3306',
  'dbuser' =&gt; 'nextcloud_user',
  'dbpassword' =&gt; 'ab1qazxsw2!QAZXSW@',
  'auth.bruteforce.protection.enabled' =&gt; false,</p>
<h1 id="end_src">+end_src</h1>
<h1 id="begin_src-php_1">+begin_src php</h1>
<p>version: '2'</p>
<p>services:</p>
<ul>
<li>Network: mariadb</li>
<li>Link to mariadb in settings after creation of docker image</li>
</ul>
<p>nextcloud:
    container_name: nextcloud
    restart: unless-stopped
    image: nextcloud:latest
    ports:
      - 8082:80
    volumes:
      - /volume1/docker/nextcloud/apps:/var/www/html/apps
      - /volume1/docker/nextcloud/config:/var/www/html/config
      - /volume1/docker/nextcloud/data:/var/www/html/data
    depends_on:
      - mariadb</p>
<p>mariadb:
    container_name: mariadb
    restart: unless-stopped
    image: mariadb
    environment:
      MYSQL_ROOT_PASSWORD: abab1qazxsw2!QAZXSW@
      MYSQL_DATABASE: nextcloud
      MYSQL_USER: nextcloud_user
      MYSQL_PASSWORD: ab1qazxsw2!QAZXSW@
    volumes:
      - /volume1/docker/mariadb:/var/lib/mysql</p>
<h1 id="end_src_1">+end_src</h1>
<p>sudo docker exec --user www-data -it nextcloud php occ app:disable related_resources
sudo docker exec -it nextcloud php occ upgrade</p>
<p>sudo docker exec -u 1026 -it nextcloud php occ upgrade
sudo docker exec -it mariadb bash</p>
<ul>
<li>
<p>Reinstealling Nextcloud
database user: nextcloud_user
database password: ab1qazxsw2!QAZXSW@
database name: nextcloud
database host: mariadb</p>
</li>
<li>
<p>Permissions
config: SYSTEM -&gt; read &amp; write
data: SYSTEM -&gt; read &amp; write
apps: users -&gt; read &amp; write</p>
</li>
</ul>
</div>
<footer>
<p>Generated by Pymind: 2025-08-10</p>
</footer>

</body>
</html>
